INCLUDE_DIRECTORIES(${MUMPS_SOURCE_DIR}/include)
IF(ENABLE_SEQUENTIAL)
  INCLUDE_DIRECTORIES(${MUMPS_SOURCE_DIR}/libseq)
ENDIF(ENABLE_SEQUENTIAL)

IF( NOT WIN32 )
  FOREACH(ARITH ${MUMPS_BUILD_VERSIONS})
    ADD_EXECUTABLE(${ARITH}simpletest ${ARITH}simpletest.F)
    TARGET_LINK_LIBRARIES(${ARITH}simpletest ${ARITH}mumps mumps_common ${BLAS_LIBRARIES} ${CMAKE_THREAD_LIBS_INIT})
    IF(ENABLE_PORD)
      TARGET_LINK_LIBRARIES(${ARITH}simpletest pord)
    ENDIF(ENABLE_PORD)
    IF(ENABLE_METIS)
      TARGET_LINK_LIBRARIES(${ARITH}simpletest ${Metis_LIBRARIES})
    ENDIF(ENABLE_METIS)
    IF(ENABLE_SCOTCH)
      TARGET_LINK_LIBRARIES(${ARITH}simpletest ${Scotch_LIBRARIES})
    ENDIF(ENABLE_SCOTCH)
    IF(ENABLE_SEQUENTIAL)
      TARGET_LINK_LIBRARIES(${ARITH}simpletest mpiseq)
    ENDIF(ENABLE_SEQUENTIAL)
  ENDFOREACH(ARITH)
ENDIF( NOT WIN32 )

IF(ENABLE_REAL AND ENABLE_DOUBLE_PRECISION)
  ADD_EXECUTABLE(c_example c_example.c)
  TARGET_LINK_LIBRARIES(c_example dmumps mumps_common ${BLAS_LIBRARIES} "-lgfortran" ${CMAKE_THREAD_LIBS_INIT})
  IF(ENABLE_PORD)
    TARGET_LINK_LIBRARIES(c_example pord)
  ENDIF(ENABLE_PORD)
  IF(ENABLE_METIS)
    TARGET_LINK_LIBRARIES(c_example ${Metis_LIBRARIES})
  ENDIF(ENABLE_METIS)
  IF(ENABLE_SCOTCH)
    TARGET_LINK_LIBRARIES(c_example ${Scotch_LIBRARIES})
  ENDIF(ENABLE_SCOTCH)
  IF(ENABLE_SEQUENTIAL)
    TARGET_LINK_LIBRARIES(c_example mpiseq)
  ENDIF(ENABLE_SEQUENTIAL)
  ADD_TEST(c_example c_example)
ENDIF(ENABLE_REAL AND ENABLE_DOUBLE_PRECISION)
